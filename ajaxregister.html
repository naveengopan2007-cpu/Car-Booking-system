<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Login / Register Page + Timeout</title>
  <style>
    * { margin:0; padding:0; box-sizing:border-box; transition:all 0.3s ease; }
    body {
      font-family: Arial, sans-serif;
      display: flex; justify-content: center; align-items: center;
      height: 100vh;
      background-image: url("C:/Users/navee/OneDrive/Pictures/black-g-wagon-4k-2020-71.jpg");
      background-size: cover; background-position: center; background-repeat: no-repeat;
    }
    .container {
      background: rgba(255, 255, 255, 0.95);
      width: 400px; padding: 30px; border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,0.2); text-align: center;
    }
    .toggle-buttons {
      display: flex; margin-bottom: 20px; border-radius: 8px;
      overflow: hidden; box-shadow: 0 2px 8px rgba(0,0,0,0.1);
    }
    .toggle-buttons button {
      flex:1; padding: 12px; border:none; font-size:16px;
      font-weight:bold; cursor:pointer; color:#333;
      background:linear-gradient(to right,#e2e8f0,#cbd5e1);
    }
    .toggle-buttons button.active {
      background:linear-gradient(to right,#3b82f6,#2563eb); color:white;
    }
    form { display:none; flex-direction:column; text-align:left; }
    form.active { display:flex; }
    form label { margin-bottom:5px; font-weight:bold; }
    form input, form select {
      margin-bottom:15px; padding:10px; border:1px solid #ccc;
      border-radius:6px; font-size:14px; width:100%;
    }
    .password-toggle { position:relative; display:inline-block; width:100%; }
    .password-toggle span {
      position:absolute; right:10px; top:50%; transform:translateY(-50%);
      cursor:pointer; color:#666;
    }
    form button {
      padding:12px; border:none; border-radius:6px;
      font-size:16px; color:white; cursor:pointer;
      background:linear-gradient(to right,#3b82f6,#2563eb);
    }
    .error { color:red; font-size:13px; margin-bottom:10px; }
    .success { color:green; font-size:14px; margin-bottom:10px; }
    #brandLogo { display:none; margin-bottom:15px; border:2px solid #ccc; border-radius:8px; }

    /* Timeout Timer */
    #timerDisplay {
      text-align:center;
      margin-top:8px;
      font-size:16px;
      color:red;
      font-weight:bold;
    }
  </style>
</head>
<body>
  <div class="container">
    
  
    <div class="toggle-buttons">
      <button id="btnLogin" class="active">Login</button>
      <button id="btnRegister">Register</button>
    </div>

    <form id="loginForm" class="active">
      <label>Email:</label>
      <input type="email" id="loginEmail" placeholder="Enter your email" required>

      <label>Password:</label>
      <div class="password-toggle">
        <input type="password" id="loginPassword" placeholder="Enter your password" required>
        <span>üëÅÔ∏è</span>
      </div>

      <div class="error" id="loginError"></div>
      <div class="success" id="loginSuccess"></div>

      <button type="submit">Login</button>

    
      <div id="timerDisplay"></div>
    </form>


    <form id="registerForm">
      <label>Full Name:</label>
      <input type="text" id="regName" placeholder="Enter your full name" required>

      <label>Email:</label>
      <input type="email" id="regEmail" placeholder="Enter your email" required>

      <label>Password:</label>
      <div class="password-toggle">
        <input type="password" id="regPassword" placeholder="Enter your password" required>
        <span>üëÅÔ∏è</span>
      </div>

      <label>Select Price Range:</label>
      <select id="priceRange" required>
        <option value="">--Select Price Range--</option>
        <option value="20 lakh+">20 lakhs+</option>
        <option value="50-1cr">50-1cr</option>
        <option value="1-5cr">1 cr-5cr</option>
        <option value="5cr+">5cr and above</option>
      </select>

      <label>Select Brand:</label>
      <select id="brandSelect" onchange="showLogo()" required>
        <option value="">--Select Brand--</option>
        <option value="benz.jpg">Benz</option>
        <option value="bmw.jpg">BMW</option>
        <option value="audi.jpg">Audi</option>
        <option value="landrover.jpg">Land Rover</option>
        <option value="jaguar.jpg">Jaguar</option>
        <option value="others">Others</option>
      </select>

      <img id="brandLogo" src="" width="100" height="100">

      <div class="error" id="registerError"></div>
      <div class="success" id="registerSuccess"></div>

      <button type="submit">Register</button>
    </form>

  </div>

  <script>

    const btnLogin = document.getElementById('btnLogin');
    const btnRegister = document.getElementById('btnRegister');
    const loginForm = document.getElementById('loginForm');
    const registerForm = document.getElementById('registerForm');

    btnLogin.onclick = () => {
      btnLogin.classList.add('active');
      btnRegister.classList.remove('active');
      loginForm.classList.add('active');
      registerForm.classList.remove('active');
    };

    btnRegister.onclick = () => {
      btnRegister.classList.add('active');
      btnLogin.classList.remove('active');
      registerForm.classList.add('active');
      loginForm.classList.remove('active');
    };


    function showLogo() {
      const select = document.getElementById("brandSelect");
      const img = document.getElementById("brandLogo");
      if (select.value) {
        img.src = "images/" + select.value;
        img.style.display = "block";
      } else {
        img.style.display = "none";
      }
    }

    document.querySelectorAll('.password-toggle span').forEach(icon => {
      icon.addEventListener('click', () => {
        const input = icon.previousElementSibling;
        input.type = input.type === 'password' ? 'text' : 'password';
      });
    });



    loginForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const email = loginEmail.value.trim();
      const password = loginPassword.value.trim();
      loginError.textContent = '';
      loginSuccess.textContent = '';

      if (!email || !password) {
        loginError.textContent = 'Please fill in all fields.';
        return;
      }

      const xhr = new XMLHttpRequest();
      xhr.open('POST', 'login.php', true);
      xhr.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          if (xhr.responseText.includes("success")) {
            loginSuccess.textContent = "Login successful!";
            loginForm.reset();
          } else {
            loginError.textContent = xhr.responseText;
          }
        }
      };
      xhr.send("email="+email+"&password="+password);
    });



    registerForm.addEventListener('submit', function(e) {
      e.preventDefault();
      const name = regName.value.trim();
      const email = regEmail.value.trim();
      const password = regPassword.value.trim();
      const priceRangeValue = priceRange.value;
      const brand = brandSelect.value;

      registerError.textContent = "";
      registerSuccess.textContent = "";

      if (!name || !email || !password || !priceRangeValue || !brand) {
        registerError.textContent = "Please fill all fields.";
        return;
      }
      if (password.length < 6) {
        registerError.textContent = "Password must be minimum 6 characters.";
        return;
      }

      const xhr = new XMLHttpRequest();
      xhr.open("POST", "register.php", true);
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");

      xhr.onreadystatechange = function() {
        if (xhr.readyState === 4 && xhr.status === 200) {
          if (xhr.responseText.includes("success")) {
            registerSuccess.textContent = "Registration successful!";
            registerForm.reset();
            brandLogo.style.display = "none";
          } else {
            registerError.textContent = xhr.responseText;
          }
        }
      };

      xhr.send(
        "name=" + name +
        "&email=" + email +
        "&password=" + password +
        "&priceRange=" + priceRangeValue +
        "&brand=" + brand
      );
    });


    
    let timeLeft = 25;
    let timer;

    function startAutoTimeout() {
      timer = setInterval(() => {
        timerDisplay.textContent = "Session ends in: " + timeLeft + "s";
        timeLeft--;

        if (timeLeft < 0) {
          clearInterval(timer);
          window.location.href = "timeout.html";
        }
      }, 1000);
    }

  
    window.onload = startAutoTimeout;
  </script>

</body>
</html>
